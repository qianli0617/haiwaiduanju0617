(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-info-index"],{"0cd4":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.page_content .main_content[data-v-969f556e]{padding:%?40?%;overflow-y:auto}.page_content .main_content .wrapper[data-v-969f556e]{height:%?100?%;font-size:%?32?%;display:flex;align-items:center;justify-content:space-between}.page_content .main_content .wrapper .label[data-v-969f556e]{color:#000;white-space:nowrap}.page_content .main_content .wrapper .content[data-v-969f556e]{display:flex;align-items:center;color:#999}.page_content .main_content .wrapper .content .avatar[data-v-969f556e]{width:%?100?%;height:%?100?%;border-radius:50%;overflow:hidden;background:transparent}.page_content .main_content .wrapper .content .avatar .image[data-v-969f556e]{width:100%;height:100%;border-radius:50%}.page_content .main_content .wrapper .content .arrow[data-v-969f556e]{width:%?40?%;margin-left:%?10?%}.page_content .main_content .wrapper .content .nickname[data-v-969f556e],\r\n.page_content .main_content .wrapper .content .mobile[data-v-969f556e]{font-size:%?32?%;color:#999;text-align:right}.page_content .mobile_popup[data-v-969f556e]{padding:%?70?% %?40?% %?40?% %?40?%}.page_content .mobile_popup .input_box[data-v-969f556e]{height:%?120?%;position:relative;display:flex;align-items:center}.page_content .mobile_popup .input_box .label[data-v-969f556e]{font-size:%?32?%;color:#000;white-space:nowrap;margin-right:%?30?%}.page_content .mobile_popup .input_box .input[data-v-969f556e]{flex:1;font-size:%?32?%;color:#000;margin-left:%?40?%}.page_content .mobile_popup .input_box .send[data-v-969f556e]{font-size:%?28?%;color:#000;padding:%?20?% 0;position:absolute;top:50%;right:0;z-index:10;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.page_content .mobile_popup .button_box[data-v-969f556e]{margin-top:%?70?%;display:flex;align-items:center;justify-content:space-between}',""]),e.exports=t},5713:function(e,t,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("b64b");var i=a(n("5530")),r=a(n("dce3")),o=n("26cb"),s={data:function(){return{buttonStyleDisable:{width:"300rpx",height:"80rpx",border:"none",fontSize:"24rpx",color:"#fff",background:"#E0E0E0",borderRadius:"14rpx",margin:"0",fontWeight:"bold"},buttonStyle:{width:"300rpx",height:"80rpx",border:"none",fontSize:"24rpx",color:"#fff",background:"linear-gradient(90deg, rgba(42, 130, 228, 1) 0%, rgba(172, 51, 193, 1) 100%)",borderRadius:"14rpx",margin:"0",fontWeight:"bold"},userInfo:{},user:{avatar:"",nickname:"",mobile:"",parent_id:"",email:""},uploadAvatar:"",referrer:!1,referrerId:"",mobilePopup:!1,codeTips:"",form:{mobile:"",code:""}}},computed:(0,i.default)({},(0,o.mapGetters)("user",["token"])),onLoad:function(){this.getPageData()},onUnload:function(){this.saveUserInfo()},methods:(0,i.default)((0,i.default)({},(0,o.mapActions)("user",["logout","getUserInfo"])),{},{bindMobile:function(){var e=this;if(this.form.mobile)if(this.form.code){var t=(0,i.default)((0,i.default)({},this.form),{},{user_oauth_id:this.userInfo.user_bind[this.$utils.platforms()]||0});this.$request("login.wxBind",t).then((function(t){1===t.code?(e.$u.toast(e.$t("toast.bind.success")),e.getUserInfo(t.data.token),uni.switchTab({url:"/pages/home/user"})):1314===t.code&&uni.showModal({title:e.$t("modal.system"),content:t.msg,confirmText:e.$t("modal.button.know"),showCancel:!1}),e.mobilePopup=!1}))}else this.$u.toast(this.$t("text.input.captcha"));else this.$u.toast(this.$t("text.input.mobile"))},referrerConfirm:function(){var e=this;this.referrerId&&this.$request("dealer.superior",{id:this.referrerId,platform:"wxMiniProgram"}).then((function(t){1===t.code?(e.$u.toast(t.msg),e.referrer=!1,e.getPageData()):e.referrer=!1})).catch((function(t){e.referrer=!1}))},codeChange:function(e){this.codeTips=e},getCode:function(){var e=this;if(this.form.mobile){var t={account:this.form.mobile,event:"changemobile"};this.$refs.uCode.canGetCode?(uni.showLoading({}),this.$request("login.sendCode",t,!1).then((function(t){1===t.code?(uni.hideLoading(),uni.$u.toast(e.$t("text.captcha.send")),e.$refs.uCode.start()):(uni.hideLoading(),uni.$u.toast(t.msg))})).catch((function(t){uni.hideLoading(),uni.$u.toast(e.$t("text.captcha.error"))}))):uni.$u.toast(this.$t("text.captcha.resend"))}else this.$u.toast(this.$t("text.input.mobile"))},getPageData:function(){var e=this;this.getUserInfo().then((function(t){1===t.code&&(e.userInfo=t.data,e.user.avatar=t.data.avatar,e.user.nickname=t.data.nickname,e.user.mobile=t.data.mobile,e.user.email=t.data.email,t.data.parent_id&&(e.user.parent_id=t.data.parent_id))}))},changeAvatar:function(){var e=this;uni.chooseImage({success:function(t){var n=t.tempFilePaths;e.uploadFile(n[0])}})},onChooseAvatar:function(e){this.uploadFile(e.detail.avatarUrl)},uploadFile:function(e){var t=this;e&&(uni.showLoading({mask:!0}),uni.uploadFile({url:this.$BASE_URL+r.default.common.upload.url,filePath:e,name:"file",header:{Token:this.token||"",Sign:this.$SIGN||""},success:function(e){if(200==e.statusCode){var n=JSON.parse(e.data);1===n.code&&(t.user.avatar=n.data.fullurl,t.uploadAvatar=n.data.url)}uni.hideLoading()},fail:function(e){uni.hideLoading()}}))},saveUserInfo:function(){var e={};this.userInfo.nickname!=this.user.nickname&&this.user.nickname&&(e.nickname=this.user.nickname),this.userInfo.avatar!=this.user.avatar&&this.uploadAvatar&&(e.avatar=this.uploadAvatar),0!==Object.keys(e).length&&this.$request("user.updateInfo",e).then((function(e){1===e.code&&uni.$emit("updateUserInfo",!0)}))}})};t.default=s},"63d6":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-5ffab58c], uni-scroll-view[data-v-5ffab58c], uni-swiper-item[data-v-5ffab58c]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}',""]),e.exports=t},"69fe":function(e,t,n){var a=n("63d6");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("482861e8",a,!0,{sourceMap:!1,shadowMode:!1})},"6b80":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3");var a={props:{seconds:{type:[String,Number],default:uni.$u.props.code.seconds},startText:{type:String,default:uni.$u.props.code.startText},changeText:{type:String,default:uni.$u.props.code.changeText},endText:{type:String,default:uni.$u.props.code.endText},keepRunning:{type:Boolean,default:uni.$u.props.code.keepRunning},uniqueKey:{type:String,default:uni.$u.props.code.uniqueKey}}};t.default=a},"80e4":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var a=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",{staticClass:"u-code"})},i=[]},"819d":function(e,t,n){var a=n("0cd4");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("063608b4",a,!0,{sourceMap:!1,shadowMode:!1})},"870e":function(e,t,n){"use strict";var a=n("819d"),i=n.n(a);i.a},"8aea":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var a={uPopup:n("340e").default,uInput:n("6f9b").default,uButton:n("4dcd").default,uCode:n("e1be").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page_content"},[n("v-uni-view",{staticClass:"head_content"},[n("CustomNavbar",{attrs:{title:e.$t("navbar.userinfo")}})],1),n("v-uni-view",{staticClass:"main_content"},[n("v-uni-view",{staticClass:"wrapper"},[n("v-uni-view",{staticClass:"label"},[e._v(e._s(e.$t("text.avatar")))]),n("v-uni-view",{staticClass:"content"},[n("v-uni-button",{staticClass:"avatar",attrs:{type:"default","open-type":"chooseAvatar"},on:{chooseavatar:function(t){arguments[0]=t=e.$handleEvent(t),e.onChooseAvatar.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeAvatar.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"image",attrs:{src:e.user.avatar,mode:"aspectFill"}})],1),n("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),n("v-uni-view",{staticClass:"wrapper"},[n("v-uni-view",{staticClass:"label"},[e._v(e._s(e.$t("text.nickname")))]),n("v-uni-view",{staticClass:"content"},[n("v-uni-input",{staticClass:"nickname",attrs:{type:"nickname",placeholder:e.$t("text.input.nickname"),"placeholder-class":"placeholder"},model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}}),n("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),n("v-uni-view",{staticClass:"wrapper"},[n("v-uni-view",{staticClass:"label"},[e._v(e._s(e.$t("text.email")))]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"mobile"},[e._v(e._s(e.user.email))])],1)],1),n("v-uni-view",{staticClass:"wrapper"},[n("v-uni-view",{staticClass:"label"},[e._v(e._s(e.$t("text.mobile")))]),e.user.mobile?n("v-uni-view",{staticClass:"content"},[n("v-uni-input",{staticClass:"mobile",attrs:{value:e.user.mobile,type:"number",disabled:!0}})],1):n("v-uni-view",{staticClass:"content",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.mobilePopup=!0}}},[n("v-uni-input",{staticClass:"mobile",staticStyle:{"pointer-events":"none"},attrs:{type:"number",placeholder:e.$t("text.bind.mobile"),"placeholder-class":"placeholder",disabled:!0}}),n("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),n("v-uni-view",{staticClass:"wrapper"},[n("v-uni-view",{staticClass:"label"},[e._v(e._s(e.$t("text.referrer")))]),e.user.parent_id?n("v-uni-view",{staticClass:"content"},[n("v-uni-input",{staticClass:"mobile",attrs:{value:e.user.parent_id,type:"number",disabled:!0}})],1):n("v-uni-view",{staticClass:"content",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.referrer=!0}}},[n("v-uni-input",{staticClass:"mobile",staticStyle:{"pointer-events":"none"},attrs:{type:"number",placeholder:e.$t("text.bind.recommend"),"placeholder-class":"placeholder",disabled:!0}}),n("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),n("u-popup",{attrs:{show:e.mobilePopup,round:20,closeable:!0,closeOnClickOverlay:!1},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.mobilePopup=!1}}},[n("v-uni-view",{staticClass:"mobile_popup"},[n("v-uni-view",{staticClass:"input_box"},[n("v-uni-text",{staticClass:"label"},[e._v(e._s(e.$t("text.mobile")))]),n("u-input",{attrs:{type:"number",maxlength:11,border:"none",cursorSpacing:"200rpx",clearable:!0,placeholder:e.$t("text.input.mobile")},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),n("v-uni-view",{staticClass:"input_box"},[n("v-uni-text",{staticClass:"label"},[e._v(e._s(e.$t("text.captcha")))]),n("u-input",{attrs:{type:"number",maxlength:6,border:"none",cursorSpacing:"200rpx",clearable:!0,placeholder:e.$t("text.input.captcha")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),n("v-uni-view",{staticClass:"send",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCode.apply(void 0,arguments)}}},[e._v(e._s(e.codeTips))])],1),n("v-uni-view",{staticClass:"button_box"},[n("u-button",{attrs:{text:e.$t("text.cancel"),customStyle:e.buttonStyleDisable},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.mobilePopup=!1}}}),n("u-button",{attrs:{text:e.$t("text.bind"),customStyle:e.buttonStyle},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindMobile.apply(void 0,arguments)}}})],1)],1)],1),n("u-code",{ref:"uCode",attrs:{uniqueKey:"info-code",keepRunning:!0,seconds:60,startText:e.$t("text.getcode"),changeText:"Xs",endText:e.$t("text.recode")},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.codeChange.apply(void 0,arguments)}}}),n("u-popup",{attrs:{show:e.referrer,round:20,closeable:!0,closeOnClickOverlay:!0},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.referrer=!1}}},[n("v-uni-view",{staticClass:"mobile_popup"},[n("v-uni-view",{staticClass:"input_box"},[n("v-uni-text",{staticClass:"label"},[e._v(e._s(e.$t("text.referrer")))]),n("u-input",{attrs:{type:"number",border:"none",cursorSpacing:"200rpx",clearable:!0,placeholder:e.$t("text.input.recommendid")},model:{value:e.referrerId,callback:function(t){e.referrerId=t},expression:"referrerId"}})],1),n("v-uni-view",{staticClass:"button_box"},[n("u-button",{attrs:{text:e.$t("text.cancel"),customStyle:e.buttonStyleDisable},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.referrer=!1}}}),n("u-button",{attrs:{text:e.$t("text.bind"),customStyle:e.buttonStyle},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.referrerConfirm.apply(void 0,arguments)}}})],1)],1)],1)],1)],1)},r=[]},bed9:function(e,t,n){"use strict";n.r(t);var a=n("8aea"),i=n("d46e");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("870e");var o=n("f0c5"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"969f556e",null,!1,a["a"],void 0);t["default"]=s.exports},d46e:function(e,t,n){"use strict";n.r(t);var a=n("5713"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a},e1be:function(e,t,n){"use strict";n.r(t);var a=n("80e4"),i=n("ef31");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("fb9f");var o=n("f0c5"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"5ffab58c",null,!1,a["a"],void 0);t["default"]=s.exports},ea14:function(e,t,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3"),n("ac1f"),n("5319");var i=a(n("6b80")),r={name:"u-code",mixins:[uni.$u.mpMixin,uni.$u.mixin,i.default],data:function(){return{secNum:this.seconds,timer:null,canGetCode:!0}},mounted:function(){this.checkKeepRunning()},watch:{seconds:{immediate:!0,handler:function(e){this.secNum=e}}},methods:{checkKeepRunning:function(){var e=Number(uni.getStorageSync(this.uniqueKey+"_$uCountDownTimestamp"));if(!e)return this.changeEvent(this.startText);var t=Math.floor(+new Date/1e3);this.keepRunning&&e&&e>t?(this.secNum=e-t,uni.removeStorageSync(this.uniqueKey+"_$uCountDownTimestamp"),this.start()):this.changeEvent(this.startText)},start:function(){var e=this;this.timer&&(clearInterval(this.timer),this.timer=null),this.$emit("start"),this.canGetCode=!1,this.changeEvent(this.changeText.replace(/x|X/,this.secNum)),this.timer=setInterval((function(){--e.secNum?e.changeEvent(e.changeText.replace(/x|X/,e.secNum)):(clearInterval(e.timer),e.timer=null,e.changeEvent(e.endText),e.secNum=e.seconds,e.$emit("end"),e.canGetCode=!0)}),1e3),this.setTimeToStorage()},reset:function(){this.canGetCode=!0,clearInterval(this.timer),this.secNum=this.seconds,this.changeEvent(this.endText)},changeEvent:function(e){this.$emit("change",e)},setTimeToStorage:function(){if(this.keepRunning&&this.timer&&this.secNum>0&&this.secNum<=this.seconds){var e=Math.floor(+new Date/1e3);uni.setStorage({key:this.uniqueKey+"_$uCountDownTimestamp",data:e+Number(this.secNum)})}}},beforeDestroy:function(){this.setTimeToStorage(),clearTimeout(this.timer),this.timer=null}};t.default=r},ef31:function(e,t,n){"use strict";n.r(t);var a=n("ea14"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a},fb9f:function(e,t,n){"use strict";var a=n("69fe"),i=n.n(a);i.a}}]);