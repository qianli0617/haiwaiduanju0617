(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-video"],{"04ed":function(t,i,e){"use strict";e.r(i);var n=e("637b"),a=e("a5db");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("ca97");var r=e("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"2d204cf6",null,!1,n["a"],void 0);i["default"]=s.exports},"637b":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var n={uIcon:e("4068").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page_content"},[e("v-uni-view",{staticClass:"main_content",style:[{paddingTop:t.barHeight+"px"}]},[e("v-uni-swiper",{staticClass:"swiper",attrs:{circular:!0,vertical:!0,duration:300,current:t.current},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.swiperChange.apply(void 0,arguments)}}},t._l(t.videoData,(function(i,n){return e("v-uni-swiper-item",{key:n,staticClass:"swiper_item"},[t.videoIndex==n?e("v-uni-view",{staticClass:"videos",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.videoClick.apply(void 0,arguments)}}},[e("v-uni-video",{ref:"video"+i.id,refInFor:!0,staticClass:"video",attrs:{id:"video"+i.id,loop:!1,controls:!1,autoplay:!1,"object-fit":t.isLandscape?"contain":"cover","enable-progress-gesture":!0,"show-center-play-btn":!1,src:i.url,poster:i.image},on:{play:function(i){arguments[0]=i=t.$handleEvent(i),t.isPlaying=!0,t.isPlayError=!1},pause:function(i){arguments[0]=i=t.$handleEvent(i),t.isPlaying=!1},timeupdate:function(i){arguments[0]=i=t.$handleEvent(i),t.videoTimeUpdate.apply(void 0,arguments)},ended:function(i){arguments[0]=i=t.$handleEvent(i),t.videoEnded.apply(void 0,arguments)},error:function(i){arguments[0]=i=t.$handleEvent(i),t.videoError.apply(void 0,arguments)},loadedmetadata:function(i){arguments[0]=i=t.$handleEvent(i),t.VideoLoadedmetadata.apply(void 0,arguments)}}}),t.isPlayError?e("v-uni-view",{staticClass:"verror"},[e("v-uni-image",{staticClass:"image",attrs:{src:i.image,mode:"aspectFill"}}),e("v-uni-view",{staticClass:"content"},[e("u-icon",{attrs:{name:"info-circle-fill",color:"#fff",size:"50"}}),e("v-uni-text",{staticClass:"text"},[t._v(t._s(t.$t("video.error")))])],1)],1):t._e()],1):e("v-uni-view",{staticClass:"vcover"},[e("v-uni-image",{staticClass:"image",attrs:{src:i.image,mode:"aspectFill"}})],1),t.isDrag||t.isPlayError||t.videoIndex!=n?t._e():e("v-uni-view",{staticClass:"buttons"},[t.isPlaying?t._e():e("u-icon",{attrs:{name:"play-right-fill",color:"rgba(255, 255, 255, 0.8)",size:60},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.videoPlay.apply(void 0,arguments)}}})],1),t.isDrag||t.isPlayError||t.videoIndex!=n?t._e():e("v-uni-view",{staticClass:"sidebar"},[e("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleLikes(i.id,n)}}},[e("v-uni-image",{staticClass:"image",attrs:{src:"https://img.nymaite.com/video_short/icons/likes_"+(i.is_like?1:0)+".png",mode:"widthFix"}}),e("v-uni-text",{staticClass:"text",class:{active:i.is_like}},[t._v(t._s(i.likes))])],1),e("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleCollect(i.vid,n)}}},[e("u-icon",{attrs:{name:"star-fill",color:i.video.is_favorite?"#E17B37":"#F5F5F5",size:"32"}}),e("v-uni-text",{staticClass:"text",class:{active:i.video.is_favorite}},[t._v(t._s(i.video.favorites))])],1)],1),t.isDrag||t.videoIndex!=n?t._e():e("v-uni-view",{staticClass:"infobox"},[e("v-uni-view",{staticClass:"title"},[t._v(t._s(i.video.title))]),e("v-uni-view",{staticClass:"content"},[e("u-icon",{attrs:{name:"play-right-fill",color:"#fff",size:"18"}}),e("v-uni-text",{staticClass:"text1"},[t._v(t._s(i.name)+" / "+t._s(t.$t("video.total",i.video.episodes)))]),e("v-uni-text",{staticClass:"text2",staticStyle:{"margin-left":"20rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openVideoDetail(i.video.id,i.video.title,i.video.image,i.video.description)}}},[t._v(t._s(t.$t("video.more")))])],1)],1),t.duration>0&&t.videoIndex==n?e("v-uni-view",{staticClass:"progress"},[t.isDrag?e("v-uni-view",{staticClass:"bartext"},[e("v-uni-text",{staticClass:"text1"},[t._v(t._s(t.dragStarTime))]),e("v-uni-text",{staticClass:"text0"},[t._v("/")]),e("v-uni-text",{staticClass:"text2"},[t._v(t._s(t.dragEndTime))])],1):t._e(),e("v-uni-view",{staticClass:"barview",class:{active:t.isDrag}},[e("v-uni-slider",{attrs:{value:t.currentTime,min:0,max:t.duration,blockSize:6,backgroundColor:"#333",activeColor:"#fff"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.sliderChange.apply(void 0,arguments)},changing:function(i){arguments[0]=i=t.$handleEvent(i),t.sliderChanging.apply(void 0,arguments)}}})],1)],1):t._e()],1)})),1)],1)],1)},o=[]},a5db:function(t,i,e){"use strict";e.r(i);var n=e("b003"),a=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},b003:function(t,i,e){"use strict";e("7a82");var n=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("99af"),e("b65f");var a=n(e("5530")),o=e("26cb"),r={data:function(){return{isIos:"ios"==uni.getSystemInfoSync().osName,barHeight:uni.getSystemInfoSync().statusBarHeight,current:0,currentTime:0,duration:0,isDrag:!1,dragStarTime:"00:00",dragEndTime:"00:00",isPlaying:!1,isPlayError:!1,clickNum:0,clickTimer:null,isUnfold:!1,originData:[],originIndex:0,oldIndex:0,videoData:[],videoIndex:0,isLandscape:!1,countdown:0,videoAd:null,isLoaded:!1}},computed:(0,a.default)((0,a.default)({},(0,o.mapGetters)("user",["token","userInfo","showAd"])),(0,o.mapGetters)("app",["videoAutoplay","adCountdown","config"])),watch:{adCountdown:function(t,i){this.countdown=t}},onLoad:function(){this.getRecommendList()},onShow:function(){this.originData.length&&this.videoPlay()},methods:{getRecommendList:function(){var t=this,i=uni.getSystemInfoSync().uniPlatform,e={platform:"mp-weixin"==i?2:1};this.$request("video.recommend",e).then((function(i){1===i.code&&i.data&&i.data.length&&(t.originData=t.originData.concat(i.data),t.initSwiperData(t.originIndex,1))}))},initSwiperData:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.originIndex,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.originData.length,a=[];if(a[this.videoIndex]=this.originData[i],a[this.videoIndex-1==-1?2:this.videoIndex-1]=this.originData[i-1==-1?n-1:i-1],a[this.videoIndex+1==3?0:this.videoIndex+1]=this.originData[i+1==n?0:i+1],this.videoData=a,this.oldIndex>=this.originData.length&&(this.oldIndex=0),this.oldIndex<0&&(this.oldIndex=this.originData.length-1),this.duration=0,this.currentTime=0,this.isDrag=!1,this.isPlayError=!1,"wxOfficialAccount"===this.$utils.platforms()&&"ios"==uni.getSystemInfoSync().platform)WeixinJSBridge.invoke("getNetworkType",{},(function(i){t.videoPlay()}));else if(1==this.videoAutoplay)var o=setTimeout((function(){t.videoPlay(),clearTimeout(o)}),500);else if(1!=e)var r=setTimeout((function(){t.videoPlay(),clearTimeout(r)}),500)},swiperChange:function(t){var i=t.detail.current,e=this.originData.length;this.videoIndex-i==2||this.videoIndex-i==-1?(this.originIndex=this.originIndex+1==e?0:this.originIndex+1,this.videoIndex=this.videoIndex+1==3?0:this.videoIndex+1,this.oldIndex=this.originIndex-1,this.initSwiperData(this.originIndex),this.originIndex==this.originData.length-1&&this.getRecommendList()):this.videoIndex-i!=-2&&this.videoIndex-i!=1||(this.originIndex=this.originIndex-1==-1?e-1:this.originIndex-1,this.videoIndex=this.videoIndex-1==-1?2:this.videoIndex-1,this.oldIndex=this.originIndex+1,this.initSwiperData(this.originIndex))},videoPlay:function(){var t=this.getVideoCtx();t&&(t.play(),this.isPlaying=!0)},videoPause:function(){var t=this.getVideoCtx();t&&(t.pause(),this.isPlaying=!1)},videoEnded:function(t){("wxOfficialAccount"===this.$utils.platforms()&&"ios"==uni.getSystemInfoSync().platform||1==this.videoAutoplay)&&(this.videoIndex<2?this.current=this.videoIndex+1:this.current=0)},videoError:function(){this.isPlayError=!0},videoClick:function(){var t=this;this.clickTimer&&clearTimeout(this.clickTimer),this.clickNum++,this.clickTimer=setTimeout((function(){t.clickNum>=2||(t.isPlaying?t.videoPause():t.videoPlay()),t.clickNum=0}),250)},VideoLoadedmetadata:function(t){var i=t.detail,e=i.width,n=i.height;this.isLandscape=e>=n},sliderChange:function(t){var i=this.getVideoCtx();i&&(this.isDrag=!1,this.duration>.1&&(i.seek(t.detail.value),i.play()))},sliderChanging:function(t){this.isDrag=!0,this.dragStarTime=this.$utils.formatTime(t.detail.value),this.dragEndTime=this.$utils.formatTime(this.duration)},videoTimeUpdate:function(t){if(!this.isDrag){var i=t.detail,e=i.currentTime,n=i.duration;this.currentTime=Math.trunc(e),this.duration=Math.trunc(n),this.dragStarTime=this.$utils.formatTime(this.currentTime),this.dragEndTime=this.$utils.formatTime(this.duration)}},getVideoCtx:function(){return uni.createVideoContext("video"+this.originData[this.originIndex].id,this)},handleLikes:function(t,i){var e=this,n={episode_id:t,type:"like"};this.$request("video.likes",n,!1).then((function(t){1===t.code&&(0==e.videoData[i].is_like?(e.videoData[i].is_like=1,e.videoData[i].likes++):(e.videoData[i].is_like=0,e.videoData[i].likes--))}))},handleCollect:function(t,i){var e=this;if(0==this.videoData[i].video.is_favorite){var n={vid:t,type:"favorite"};this.$request("video.addRecord",n,!1).then((function(t){1===t.code&&(e.videoData[i].video.is_favorite=1,e.videoData[i].video.favorites++)}))}else{var a={ids:t,type:"favorite"};this.$request("video.deleteRecord",a,!1).then((function(t){1===t.code&&(e.videoData[i].video.is_favorite=0,e.videoData[i].video.favorites--)}))}}}};i.default=r},b40f:function(t,i,e){var n=e("ee7a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("6d758b88",n,!0,{sourceMap:!1,shadowMode:!1})},b65f:function(t,i,e){var n=e("23e7"),a=e("b42e");n({target:"Math",stat:!0},{trunc:a})},ca97:function(t,i,e){"use strict";var n=e("b40f"),a=e.n(n);a.a},ee7a:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.page_content .ad_box[data-v-2d204cf6]{position:absolute;bottom:%?80?%;right:%?30?%;z-index:1}.page_content .ad_box .button[data-v-2d204cf6]{width:%?80?%;height:%?80?%;border-radius:50%;background:transparent;outline:none;background-image:url(https://img.nymaite.com/video_short/icons/jifen.png);background-size:cover}.page_content .main_content[data-v-2d204cf6]{position:relative;background:#000}.page_content .main_content .swiper[data-v-2d204cf6]{width:100%;height:100%;background:#000;border-radius:%?16?%;overflow:hidden}.page_content .main_content .swiper .swiper_item[data-v-2d204cf6]{position:relative;color:#fff}.page_content .main_content .swiper .swiper_item .videos[data-v-2d204cf6]{width:100%;height:100%;position:relative}.page_content .main_content .swiper .swiper_item .videos .video[data-v-2d204cf6]{width:100%;height:100%;border-radius:%?16?%;overflow:hidden}.page_content .main_content .swiper .swiper_item .videos .verror[data-v-2d204cf6]{width:100%;height:100%;background:#000;position:absolute;top:0;left:0;z-index:1}.page_content .main_content .swiper .swiper_item .videos .verror .image[data-v-2d204cf6]{width:100%;height:100%;opacity:.3}.page_content .main_content .swiper .swiper_item .videos .verror .content[data-v-2d204cf6]{width:100%;position:absolute;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:flex;flex-direction:column;align-items:center}.page_content .main_content .swiper .swiper_item .videos .verror .content .text[data-v-2d204cf6]{font-size:%?32?%;color:#fff;margin-top:%?40?%}.page_content .main_content .swiper .swiper_item .vcover[data-v-2d204cf6]{width:100%;height:100%}.page_content .main_content .swiper .swiper_item .vcover .image[data-v-2d204cf6]{width:100%;height:100%;opacity:.3}.page_content .main_content .swiper .swiper_item .buttons[data-v-2d204cf6]{position:absolute;top:50%;left:50%;z-index:0;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);pointer-events:auto}.page_content .main_content .swiper .swiper_item .sidebar[data-v-2d204cf6]{position:absolute;right:%?30?%;bottom:%?260?%;z-index:1}.page_content .main_content .swiper .swiper_item .sidebar .item[data-v-2d204cf6]{margin-bottom:%?40?%;text-align:center;display:flex;flex-direction:column;align-items:center}.page_content .main_content .swiper .swiper_item .sidebar .item[data-v-2d204cf6]:last-child{margin-bottom:0}.page_content .main_content .swiper .swiper_item .sidebar .item .image[data-v-2d204cf6]{width:%?70?%;margin:0 auto;opacity:.9}.page_content .main_content .swiper .swiper_item .sidebar .item .text[data-v-2d204cf6]{font-size:%?28?%}.page_content .main_content .swiper .swiper_item .sidebar .item .text.active[data-v-2d204cf6]{color:#ee7f33}.page_content .main_content .swiper .swiper_item .sidebar .item .btn[data-v-2d204cf6]{display:block;background:transparent;color:#fff;box-sizing:border-box;font-size:%?28?%;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .sidebar .item .btn[data-v-2d204cf6]::after{display:none}.page_content .main_content .swiper .swiper_item .infobox[data-v-2d204cf6]{width:100%;position:absolute;bottom:%?60?%;left:0;z-index:1;font-size:%?32?%;padding:0 %?30?%}.page_content .main_content .swiper .swiper_item .infobox .title[data-v-2d204cf6]{font-weight:700;margin-bottom:%?20?%}.page_content .main_content .swiper .swiper_item .infobox .textarea[data-v-2d204cf6]{margin-bottom:%?20?%;display:flex;flex-direction:row;overflow:hidden;font-size:%?30?%;min-height:%?80?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text[data-v-2d204cf6]{width:100%;display:-webkit-box;-webkit-box-orient:vertical;text-overflow:ellipsis;-webkit-line-clamp:2;overflow:hidden;text-align:justify;word-break:break-all;position:relative;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text.active[data-v-2d204cf6]{-webkit-line-clamp:999}.page_content .main_content .swiper .swiper_item .infobox .textarea .text[data-v-2d204cf6]::before{content:"";float:right;width:0;height:100%;background:#000;overflow:hidden;margin-bottom:%?-40?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text .btn[data-v-2d204cf6]{float:right;clear:both;background:transparent;border:none;color:#fff;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .infobox .content[data-v-2d204cf6]{display:flex;flex-direction:row;align-items:center}.page_content .main_content .swiper .swiper_item .infobox .content .text1[data-v-2d204cf6]{margin-left:%?16?%}.page_content .main_content .swiper .swiper_item .infobox .content .text2[data-v-2d204cf6]{text-decoration:underline}.page_content .main_content .swiper .swiper_item .progress[data-v-2d204cf6]{width:100%;position:absolute;bottom:%?10?%;left:0;z-index:1}.page_content .main_content .swiper .swiper_item .progress uni-slider[data-v-2d204cf6]{margin:0 %?36?%}.page_content .main_content .swiper .swiper_item .progress uni-slider[data-v-2d204cf6]{margin:0 %?36?%}.page_content .main_content .swiper .swiper_item .progress .bartext[data-v-2d204cf6]{display:flex;flex-direction:row;justify-content:center;font-size:%?40?%;margin-bottom:%?60?%;font-weight:700}.page_content .main_content .swiper .swiper_item .progress .bartext .text0[data-v-2d204cf6]{padding:0 %?8?%}.page_content .main_content .swiper .swiper_item .progress .bartext .text2[data-v-2d204cf6]{color:hsla(0,0%,100%,.5)}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-2d204cf6]  .uni-slider-handle-wrapper .uni-slider-handle,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-2d204cf6]  .wx-slider-handle-wrapper .wx-slider-handle{width:%?64?%!important;height:%?64?%!important;margin-left:%?-32?%!important;margin-top:%?-32?%!important}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-2d204cf6]  .uni-slider-handle-wrapper,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-2d204cf6]  .wx-slider-handle-wrapper{height:%?4?%;transition:all .3s}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-2d204cf6]  .uni-slider-handle-wrapper .uni-slider-thumb,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-2d204cf6]  .wx-slider-handle-wrapper .wx-slider-thumb{width:%?12?%!important;height:%?12?%!important;margin-left:%?-6?%!important;margin-top:%?-6?%!important}.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-2d204cf6]  .uni-slider-handle-wrapper,\r\n.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-2d204cf6]  .wx-slider-handle-wrapper{height:%?24?%;transition:all .3s}.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-2d204cf6]  .uni-slider-handle-wrapper .uni-slider-thumb,\r\n.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-2d204cf6]  .wx-slider-handle-wrapper .wx-slider-thumb{width:%?32?%!important;height:%?32?%!important;margin-left:%?-16?%!important;margin-top:%?-16?%!important}',""]),t.exports=i}}]);