(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-video"],{"12da":function(e,t,i){var a=i("c990");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("5c5bb353",a,!0,{sourceMap:!1,shadowMode:!1})},"23c5":function(e,t,i){"use strict";i.r(t);var a=i("fec8"),n=i("2dbb");for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("2fad");var r=i("f0c5"),s=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"eed0a9ba",null,!1,a["a"],void 0);t["default"]=s.exports},"2dbb":function(e,t,i){"use strict";i.r(t);var a=i("c465"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"2fad":function(e,t,i){"use strict";var a=i("12da"),n=i.n(a);n.a},b65f:function(e,t,i){var a=i("23e7"),n=i("b42e");a({target:"Math",stat:!0},{trunc:n})},c465:function(e,t,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("99af"),i("b65f");var n=a(i("5530")),o=i("26cb"),r={data:function(){return{isIos:"ios"==uni.getSystemInfoSync().osName,barHeight:uni.getSystemInfoSync().statusBarHeight,current:0,currentTime:0,duration:0,isDrag:!1,dragStarTime:"00:00",dragEndTime:"00:00",isPlaying:!1,isPlayError:!1,clickNum:0,clickTimer:null,isUnfold:!1,originData:[],originIndex:0,oldIndex:0,videoData:[],videoIndex:0,isLandscape:!1,countdown:0,videoAd:null,isLoaded:!1}},computed:(0,n.default)((0,n.default)({},(0,o.mapGetters)("user",["token","userInfo","showAd"])),(0,o.mapGetters)("app",["videoAutoplay","adCountdown","config"])),watch:{adCountdown:function(e,t){this.countdown=e}},onLoad:function(){this.getRecommendList()},onShow:function(){this.originData.length&&this.videoPlay()},methods:{getRecommendList:function(){var e=this,t=uni.getSystemInfoSync().uniPlatform,i={platform:"mp-weixin"==t?2:1};this.$request("video.recommend",i).then((function(t){1===t.code&&t.data&&t.data.length&&(e.originData=e.originData.concat(t.data),e.initSwiperData(e.originIndex,1))}))},initSwiperData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.originIndex,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.originData.length,n=[];if(n[this.videoIndex]=this.originData[t],n[this.videoIndex-1==-1?2:this.videoIndex-1]=this.originData[t-1==-1?a-1:t-1],n[this.videoIndex+1==3?0:this.videoIndex+1]=this.originData[t+1==a?0:t+1],this.videoData=n,this.oldIndex>=this.originData.length&&(this.oldIndex=0),this.oldIndex<0&&(this.oldIndex=this.originData.length-1),this.duration=0,this.currentTime=0,this.isDrag=!1,this.isPlayError=!1,"wxOfficialAccount"===this.$utils.platforms()&&"ios"==uni.getSystemInfoSync().platform)WeixinJSBridge.invoke("getNetworkType",{},(function(t){e.videoPlay()}));else if(1==this.videoAutoplay)var o=setTimeout((function(){e.videoPlay(),clearTimeout(o)}),500);else if(1!=i)var r=setTimeout((function(){e.videoPlay(),clearTimeout(r)}),500)},swiperChange:function(e){var t=e.detail.current,i=this.originData.length;this.videoIndex-t==2||this.videoIndex-t==-1?(this.originIndex=this.originIndex+1==i?0:this.originIndex+1,this.videoIndex=this.videoIndex+1==3?0:this.videoIndex+1,this.oldIndex=this.originIndex-1,this.initSwiperData(this.originIndex),this.originIndex==this.originData.length-1&&this.getRecommendList()):this.videoIndex-t!=-2&&this.videoIndex-t!=1||(this.originIndex=this.originIndex-1==-1?i-1:this.originIndex-1,this.videoIndex=this.videoIndex-1==-1?2:this.videoIndex-1,this.oldIndex=this.originIndex+1,this.initSwiperData(this.originIndex))},videoPlay:function(){var e=this.getVideoCtx();e&&(e.play(),this.isPlaying=!0)},videoPause:function(){var e=this.getVideoCtx();e&&(e.pause(),this.isPlaying=!1)},videoEnded:function(e){("wxOfficialAccount"===this.$utils.platforms()&&"ios"==uni.getSystemInfoSync().platform||1==this.videoAutoplay)&&(this.videoIndex<2?this.current=this.videoIndex+1:this.current=0)},videoError:function(){this.isPlayError=!0},videoClick:function(){var e=this;this.clickTimer&&clearTimeout(this.clickTimer),this.clickNum++,this.clickTimer=setTimeout((function(){e.clickNum>=2||(e.isPlaying?e.videoPause():e.videoPlay()),e.clickNum=0}),250)},VideoLoadedmetadata:function(e){var t=e.detail,i=t.width,a=t.height;this.isLandscape=i>=a},sliderChange:function(e){var t=this.getVideoCtx();t&&(this.isDrag=!1,this.duration>.1&&(t.seek(e.detail.value),t.play()))},sliderChanging:function(e){this.isDrag=!0,this.dragStarTime=this.$utils.formatTime(e.detail.value),this.dragEndTime=this.$utils.formatTime(this.duration)},videoTimeUpdate:function(e){if(!this.isDrag){var t=e.detail,i=t.currentTime,a=t.duration;this.currentTime=Math.trunc(i),this.duration=Math.trunc(a),this.dragStarTime=this.$utils.formatTime(this.currentTime),this.dragEndTime=this.$utils.formatTime(this.duration)}},getVideoCtx:function(){return uni.createVideoContext("video"+this.originData[this.originIndex].id,this)},handleLikes:function(e,t){var i=this,a={episode_id:e,type:"like"};this.$request("video.likes",a,!1).then((function(e){1===e.code&&(0==i.videoData[t].is_like?(i.videoData[t].is_like=1,i.videoData[t].likes++):(i.videoData[t].is_like=0,i.videoData[t].likes--))}))},handleCollect:function(e,t){var i=this;if(0==this.videoData[t].video.is_favorite){var a={vid:e,type:"favorite"};this.$request("video.addRecord",a,!1).then((function(e){1===e.code&&(i.videoData[t].video.is_favorite=1,i.videoData[t].video.favorites++)}))}else{var n={ids:e,type:"favorite"};this.$request("video.deleteRecord",n,!1).then((function(e){1===e.code&&(i.videoData[t].video.is_favorite=0,i.videoData[t].video.favorites--)}))}}}};t.default=r},c990:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.page_content .ad_box[data-v-eed0a9ba]{position:absolute;bottom:%?80?%;right:%?30?%;z-index:1}.page_content .ad_box .button[data-v-eed0a9ba]{width:%?80?%;height:%?80?%;border-radius:50%;background:transparent;outline:none;background-image:url(https://img.nymaite.com/video_short/icons/jifen.png);background-size:cover}.page_content .main_content[data-v-eed0a9ba]{position:relative;background:#000}.page_content .main_content .swiper[data-v-eed0a9ba]{width:100%;height:100%;background:#000;border-radius:%?16?%;overflow:hidden}.page_content .main_content .swiper .swiper_item[data-v-eed0a9ba]{position:relative;color:#fff}.page_content .main_content .swiper .swiper_item .videos[data-v-eed0a9ba]{width:100%;height:100%;position:relative}.page_content .main_content .swiper .swiper_item .videos .video[data-v-eed0a9ba]{width:100%;height:100%;border-radius:%?16?%;overflow:hidden}.page_content .main_content .swiper .swiper_item .videos .verror[data-v-eed0a9ba]{width:100%;height:100%;background:#000;position:absolute;top:0;left:0;z-index:1}.page_content .main_content .swiper .swiper_item .videos .verror .image[data-v-eed0a9ba]{width:100%;height:100%;opacity:.3}.page_content .main_content .swiper .swiper_item .videos .verror .content[data-v-eed0a9ba]{width:100%;position:absolute;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:flex;flex-direction:column;align-items:center}.page_content .main_content .swiper .swiper_item .videos .verror .content .text[data-v-eed0a9ba]{font-size:%?32?%;color:#fff;margin-top:%?40?%}.page_content .main_content .swiper .swiper_item .vcover[data-v-eed0a9ba]{width:100%;height:100%}.page_content .main_content .swiper .swiper_item .vcover .image[data-v-eed0a9ba]{width:100%;height:100%;opacity:.3}.page_content .main_content .swiper .swiper_item .buttons[data-v-eed0a9ba]{position:absolute;top:50%;left:50%;z-index:0;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);pointer-events:auto}.page_content .main_content .swiper .swiper_item .sidebar[data-v-eed0a9ba]{position:absolute;right:%?30?%;bottom:%?260?%;z-index:1}.page_content .main_content .swiper .swiper_item .sidebar .item[data-v-eed0a9ba]{margin-bottom:%?40?%;text-align:center;display:flex;flex-direction:column;align-items:center}.page_content .main_content .swiper .swiper_item .sidebar .item[data-v-eed0a9ba]:last-child{margin-bottom:0}.page_content .main_content .swiper .swiper_item .sidebar .item .image[data-v-eed0a9ba]{width:%?70?%;margin:0 auto;opacity:.9}.page_content .main_content .swiper .swiper_item .sidebar .item .text[data-v-eed0a9ba]{font-size:%?28?%}.page_content .main_content .swiper .swiper_item .sidebar .item .text.active[data-v-eed0a9ba]{color:#ee7f33}.page_content .main_content .swiper .swiper_item .sidebar .item .btn[data-v-eed0a9ba]{display:block;background:transparent;color:#fff;box-sizing:border-box;font-size:%?28?%;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .sidebar .item .btn[data-v-eed0a9ba]::after{display:none}.page_content .main_content .swiper .swiper_item .infobox[data-v-eed0a9ba]{width:100%;position:absolute;bottom:%?60?%;left:0;z-index:1;font-size:%?32?%;padding:0 %?30?%}.page_content .main_content .swiper .swiper_item .infobox .title[data-v-eed0a9ba]{font-weight:700;margin-bottom:%?20?%}.page_content .main_content .swiper .swiper_item .infobox .textarea[data-v-eed0a9ba]{margin-bottom:%?20?%;display:flex;flex-direction:row;overflow:hidden;font-size:%?30?%;min-height:%?80?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text[data-v-eed0a9ba]{width:100%;display:-webkit-box;-webkit-box-orient:vertical;text-overflow:ellipsis;-webkit-line-clamp:2;overflow:hidden;text-align:justify;word-break:break-all;position:relative;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text.active[data-v-eed0a9ba]{-webkit-line-clamp:999}.page_content .main_content .swiper .swiper_item .infobox .textarea .text[data-v-eed0a9ba]::before{content:"";float:right;width:0;height:100%;background:#000;overflow:hidden;margin-bottom:%?-40?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text .btn[data-v-eed0a9ba]{float:right;clear:both;background:transparent;border:none;color:#fff;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .infobox .content[data-v-eed0a9ba]{display:flex;flex-direction:row;align-items:center}.page_content .main_content .swiper .swiper_item .infobox .content .text1[data-v-eed0a9ba]{margin-left:%?16?%}.page_content .main_content .swiper .swiper_item .infobox .content .text2[data-v-eed0a9ba]{text-decoration:underline}.page_content .main_content .swiper .swiper_item .progress[data-v-eed0a9ba]{width:100%;position:absolute;bottom:%?10?%;left:0;z-index:1}.page_content .main_content .swiper .swiper_item .progress uni-slider[data-v-eed0a9ba]{margin:0 %?36?%}.page_content .main_content .swiper .swiper_item .progress uni-slider[data-v-eed0a9ba]{margin:0 %?36?%}.page_content .main_content .swiper .swiper_item .progress .bartext[data-v-eed0a9ba]{display:flex;flex-direction:row;justify-content:center;font-size:%?40?%;margin-bottom:%?60?%;font-weight:700}.page_content .main_content .swiper .swiper_item .progress .bartext .text0[data-v-eed0a9ba]{padding:0 %?8?%}.page_content .main_content .swiper .swiper_item .progress .bartext .text2[data-v-eed0a9ba]{color:hsla(0,0%,100%,.5)}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-eed0a9ba]  .uni-slider-handle-wrapper .uni-slider-handle,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-eed0a9ba]  .wx-slider-handle-wrapper .wx-slider-handle{width:%?64?%!important;height:%?64?%!important;margin-left:%?-32?%!important;margin-top:%?-32?%!important}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-eed0a9ba]  .uni-slider-handle-wrapper,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-eed0a9ba]  .wx-slider-handle-wrapper{height:%?4?%;transition:all .3s}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-eed0a9ba]  .uni-slider-handle-wrapper .uni-slider-thumb,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-eed0a9ba]  .wx-slider-handle-wrapper .wx-slider-thumb{width:%?12?%!important;height:%?12?%!important;margin-left:%?-6?%!important;margin-top:%?-6?%!important}.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-eed0a9ba]  .uni-slider-handle-wrapper,\r\n.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-eed0a9ba]  .wx-slider-handle-wrapper{height:%?24?%;transition:all .3s}.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-eed0a9ba]  .uni-slider-handle-wrapper .uni-slider-thumb,\r\n.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-eed0a9ba]  .wx-slider-handle-wrapper .wx-slider-thumb{width:%?32?%!important;height:%?32?%!important;margin-left:%?-16?%!important;margin-top:%?-16?%!important}',""]),e.exports=t},fec8:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var a={uIcon:i("fc6f").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page_content"},[i("v-uni-view",{staticClass:"main_content",style:[{paddingTop:e.barHeight+"px"}]},[i("v-uni-swiper",{staticClass:"swiper",attrs:{circular:!0,vertical:!0,duration:300,current:e.current},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.swiperChange.apply(void 0,arguments)}}},e._l(e.videoData,(function(t,a){return i("v-uni-swiper-item",{key:a,staticClass:"swiper_item"},[e.videoIndex==a?i("v-uni-view",{staticClass:"videos",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.videoClick.apply(void 0,arguments)}}},[i("v-uni-video",{ref:"video"+t.id,refInFor:!0,staticClass:"video",attrs:{id:"video"+t.id,loop:!1,controls:!1,autoplay:!1,"object-fit":e.isLandscape?"contain":"cover","enable-progress-gesture":!0,"show-center-play-btn":!1,src:t.url,poster:t.image},on:{play:function(t){arguments[0]=t=e.$handleEvent(t),e.isPlaying=!0,e.isPlayError=!1},pause:function(t){arguments[0]=t=e.$handleEvent(t),e.isPlaying=!1},timeupdate:function(t){arguments[0]=t=e.$handleEvent(t),e.videoTimeUpdate.apply(void 0,arguments)},ended:function(t){arguments[0]=t=e.$handleEvent(t),e.videoEnded.apply(void 0,arguments)},error:function(t){arguments[0]=t=e.$handleEvent(t),e.videoError.apply(void 0,arguments)},loadedmetadata:function(t){arguments[0]=t=e.$handleEvent(t),e.VideoLoadedmetadata.apply(void 0,arguments)}}}),e.isPlayError?i("v-uni-view",{staticClass:"verror"},[i("v-uni-image",{staticClass:"image",attrs:{src:t.image,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"content"},[i("u-icon",{attrs:{name:"info-circle-fill",color:"#fff",size:"50"}}),i("v-uni-text",{staticClass:"text"},[e._v(e._s(e.$t("video.error")))])],1)],1):e._e()],1):i("v-uni-view",{staticClass:"vcover"},[i("v-uni-image",{staticClass:"image",attrs:{src:t.image,mode:"aspectFill"}})],1),e.isDrag||e.isPlayError||e.videoIndex!=a?e._e():i("v-uni-view",{staticClass:"buttons"},[e.isPlaying?e._e():i("u-icon",{attrs:{name:"play-right-fill",color:"rgba(255, 255, 255, 0.8)",size:60},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.videoPlay.apply(void 0,arguments)}}})],1),e.isDrag||e.isPlayError||e.videoIndex!=a?e._e():i("v-uni-view",{staticClass:"sidebar"},[i("v-uni-view",{staticClass:"item",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.handleLikes(t.id,a)}}},[i("v-uni-image",{staticClass:"image",attrs:{src:"https://img.nymaite.com/video_short/icons/likes_"+(t.is_like?1:0)+".png",mode:"widthFix"}}),i("v-uni-text",{staticClass:"text",class:{active:t.is_like}},[e._v(e._s(t.likes))])],1),i("v-uni-view",{staticClass:"item",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.handleCollect(t.vid,a)}}},[i("u-icon",{attrs:{name:"star-fill",color:t.video.is_favorite?"#E17B37":"#F5F5F5",size:"32"}}),i("v-uni-text",{staticClass:"text",class:{active:t.video.is_favorite}},[e._v(e._s(t.video.favorites))])],1)],1),e.isDrag||e.videoIndex!=a?e._e():i("v-uni-view",{staticClass:"infobox"},[i("v-uni-view",{staticClass:"title"},[e._v(e._s(t.video.title))]),i("v-uni-view",{staticClass:"content"},[i("u-icon",{attrs:{name:"play-right-fill",color:"#fff",size:"18"}}),i("v-uni-text",{staticClass:"text1"},[e._v(e._s(t.name)+" / "+e._s(e.$t("video.total",t.video.episodes)))]),i("v-uni-text",{staticClass:"text2",staticStyle:{"margin-left":"20rpx"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.openVideoDetail(t.video.id,t.video.title,t.video.image,t.video.description)}}},[e._v(e._s(e.$t("video.more")))])],1)],1),e.duration>0&&e.videoIndex==a?i("v-uni-view",{staticClass:"progress"},[e.isDrag?i("v-uni-view",{staticClass:"bartext"},[i("v-uni-text",{staticClass:"text1"},[e._v(e._s(e.dragStarTime))]),i("v-uni-text",{staticClass:"text0"},[e._v("/")]),i("v-uni-text",{staticClass:"text2"},[e._v(e._s(e.dragEndTime))])],1):e._e(),i("v-uni-view",{staticClass:"barview",class:{active:e.isDrag}},[i("v-uni-slider",{attrs:{value:e.currentTime,min:0,max:e.duration,blockSize:6,backgroundColor:"#333",activeColor:"#fff"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.sliderChange.apply(void 0,arguments)},changing:function(t){arguments[0]=t=e.$handleEvent(t),e.sliderChanging.apply(void 0,arguments)}}})],1)],1):e._e()],1)})),1)],1)],1)},o=[]}}]);